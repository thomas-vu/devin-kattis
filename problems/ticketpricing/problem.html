<div class="problembody">
<div class="illustration" style="width:45.00%">
<img alt="/problems/ticketpricing/file/statement/en/img-0001.jpg" class="illustration" src="/problems/ticketpricing/file/statement/en/img-0001.jpg"/>
<div class="description">
        Picture from Wikimedia Commons
      </div>
</div>
<p>Plane ticket prices fluctuate wildly from one week to the
    next, and their unpredictability is a major source of
    frustration for travellers. Some travellers regret buying
    tickets too early when the prices drop right after they
    purchase the tickets, and some travellers regret buying tickets
    too late when prices rise right before they are about to make
    the purchase. At the end, no one is happy, except the airlines,
    of course.</p>
<p>Surely there is some reason to this madness. It turns out
    that airlines price their tickets dynamically, based on how
    many seats are still available and how close the flight is. For
    example, if there are very few seats left on a flight then the
    tickets may be expensive until the last few weeks before the
    flight, at which point the prices may decrease to fill the
    empty seats. Ultimately, the airlines wish to maximize revenue
    from each flight.</p>
<p>You have been hired by the International Contrived Pricing
    Corporation (ICPC) to set ticket prices each week for airlines.
    The airlines have collected and analyzed historical data, and
    have good estimates on the number of seats that will be sold at
    a particular ticket price with a particular number of weeks
    before the flight. Given the number of seats left on a flight
    as well as the number of weeks left before the flight, your job
    is to set the ticket price for the current week, in order to
    maximize the total revenue obtained from ticket sales from the
    current week to the time of the flight. You may assume that the
    number of tickets sold is exactly the same as the estimates,
    unless there are not enough remaining seats. In that case, all
    remaining seats will be sold. You may also assume that the
    optimal ticket prices will be chosen for the remaining weeks
    before the flight.</p>
<p>Note that higher prices do not necessarily mean fewer
    tickets will be sold. In fact, higher prices can sometimes
    increase sales as travellers may be worried that the prices
    will rise even higher later.</p>
<h2>Input</h2>
<p>The input consists of one case. The first line contains two
    integers, <span class="tex2jax_process">$N$</span> and
    <span class="tex2jax_process">$W$</span>, the number of seats
    left and the number of weeks left before the flight
    (<span class="tex2jax_process">$0 &lt; N \leq 300$</span>,
    <span class="tex2jax_process">$0 \leq W \leq 52$</span>). The
    next <span class="tex2jax_process">$W+1$</span> lines give the
    estimates for <span class="tex2jax_process">$W$</span> weeks,
    <span class="tex2jax_process">$W-1$</span> weeks, â€¦, and down
    to <span class="tex2jax_process">$0$</span> weeks (i.e. last
    week) before the flight. Each of these lines starts with an
    integer <span class="tex2jax_process">$K$</span> (<span class="tex2jax_process">$0 &lt; K \leq 100$</span>), the number of
    different prices to consider that week. This is followed by
    <span class="tex2jax_process">$K$</span> integers <span class="tex2jax_process">$0 &lt; p_1 &lt; \cdots &lt; p_ K &lt;
    1000$</span> giving the prices in dollars. Finally, this is
    followed by <span class="tex2jax_process">$K$</span> additional
    integers <span class="tex2jax_process">$s_1, \ldots , s_
    K$</span> (<span class="tex2jax_process">$0 \leq s_ i \leq
    N$</span>) indicating the number of tickets that will be sold
    for the corresponding prices.</p>
<h2>Output</h2>
<p>On the first line, print the maximum total revenue the
    airline can obtain from ticket sales from the current week to
    the time of the flight. On the second line, print the ticket
    price to set for the current week (<span class="tex2jax_process">$W$</span> weeks before the flight) to
    achieve this maximum.</p>
<p>If there are multiple sets of ticket prices achieving this
    maximum, choose the smallest ticket price for week <span class="tex2jax_process">$W$</span>.</p>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>
50 2
1 437 47
3 357 803 830 13 45 46
1 611 14
</pre>
</td>
<td>
<pre>
23029
437
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 2</th>
<th>Sample Output 2</th>
</tr>
<tr>
<td>
<pre>
100 3
4 195 223 439 852 92 63 15 1
2 811 893 76 27
1 638 3
1 940 38
</pre>
</td>
<td>
<pre>
83202
852
</pre>
</td>
</tr>
</table>
</div>