<div class="problembody">
<p>Your friend claims to have solved the problem <em>Eulerian
    Graphs</em>, and to one-up you even implemented an algorithm to
    supposedly find the kind of walks described! To remind you,
    that problem is about determining if a directed graph contains
    a walk that passes through each edge exactly once.</p>
<p>You strongly doubt your friend’s claim. After all, surely
    they can’t be further ahead in their algorithm training than
    you. The only explanation is that their algorithm is actually
    incorrect. Write a program that, given an input graph and a
    walk in the graph, determines if it is passes all the edges in
    the graph exactly once.</p>
<p>You should detect two error conditions. First, if the walk
    uses an edge that does not exist, you should find the earliest
    point the walk where this happens. This includes cases where
    the walk goes from one vertex to another that do have an edge
    between them, but the edge has already been passed. Keep in
    mind that the graph is allowed to contain multiple edges
    between the same pair of vertices, each of which must be passed
    exactly once.</p>
<p>Secondly, if the walk itself was valid, you must check if it
    actually passed through every edge.</p>
<h2>Input</h2>
<p>The first line contains integers <span class="tex2jax_process">$N$</span> (<span class="tex2jax_process">$2
    \le N \le 100\, 000$</span>), the number of vertices, and
    <span class="tex2jax_process">$M$</span> (<span class="tex2jax_process">$0 \le M \le 200\, 000$</span>), the number
    of edges. This is followed by <span class="tex2jax_process">$M$</span> lines, one for each edge
    <span class="tex2jax_process">$a \rightarrow b$</span>,
    containing the numbers <span class="tex2jax_process">$a$</span>
    and <span class="tex2jax_process">$b$</span> (<span class="tex2jax_process">$1 \le a, b \le N$</span>).</p>
<p>The next line contains the integer <span class="tex2jax_process">$1 \le W \le 200\, 000$</span>, the length of
    the walk in the graph. This is followed by a single line
    containing <span class="tex2jax_process">$W + 1$</span> vertex
    names <span class="tex2jax_process">$w_1, w_2, \dots , w_{W +
    1}$</span>. The walk consists of the edges <span class="tex2jax_process">$w_1 \rightarrow w_2$</span>, <span class="tex2jax_process">$w_2 \rightarrow w_3$</span>, <span class="tex2jax_process">$\dots $</span>.</p>
<p>In this problem we do not guarantee that the graph is
    connected in any way, nor that vertices may not be isolated. As
    long as the walk passes through all edges, you should judge it
    as correct.</p>
<h2>Output</h2>
<p>If the walk is invalid, output the index of the first
    invalid edge (starting at <span class="tex2jax_process">$1$</span>). Otherwise, if the walk does not
    pass through every edge, output <tt class="ttfamily">too
    short</tt>. Otherwise, output <tt class="ttfamily">correct</tt>.</p>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>2 4
1 2
2 2
1 1
2 1
4
1 2 2 1 1
</pre>
</td>
<td>
<pre>correct
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 2</th>
<th>Sample Output 2</th>
</tr>
<tr>
<td>
<pre>2 4
2 2
2 1
1 2
1 1
4
1 2 1 1 2
</pre>
</td>
<td>
<pre>4
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 3</th>
<th>Sample Output 3</th>
</tr>
<tr>
<td>
<pre>2 4
2 1
2 2
1 2
1 1
3
1 2 1 1
</pre>
</td>
<td>
<pre>too short
</pre>
</td>
</tr>
</table>
</div>