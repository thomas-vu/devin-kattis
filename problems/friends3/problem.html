<div class="problembody">
<p><span class="tex2jax_process">$N$</span> friends are playing
    a game. The game is played on a row of <span class="tex2jax_process">$L$</span> squares, numbered from
    <span class="tex2jax_process">$0$</span> to <span class="tex2jax_process">$L - 1$</span>, where squares <span class="tex2jax_process">$i$</span> and <span class="tex2jax_process">$i+1$</span> are adjacent to each other. At
    most one friend stand on each square at any given time. In each
    step of the game, one friend jumps from its current square to a
    new (non-occupied) square.</p>
<p>In any moment of the game, the <em>score</em> of a friend is
    the length of the longest contiguous segment of friends it is
    part of. This means that if a friend stands on some position
    <span class="tex2jax_process">$x$</span>, and there are friends
    on positions <span class="tex2jax_process">$a, a + 1, ..., x -
    1, x, x + 1, ..., b - 1, b$</span>, the score of the friend is
    <span class="tex2jax_process">$b - a + 1$</span>.</p>
<p>The total score of the game is the sum of scores for all
    friends. At various times during the game, the friends wonder
    what their current total score is.</p>
<h2>Example</h2>
<p>Assume that we have <span class="tex2jax_process">$N =
    3$</span> friends playing on a strip of length <span class="tex2jax_process">$L = 7$</span>. Initially, their locations
    are <span class="tex2jax_process">$1, 3, 4$</span>. The score
    of the friend on location 1 is just 1, since it has no friends
    to the left or to the right. However, the friends at locations
    3 and 4 make a segment of length 2, so each of their scores are
    2. The score of the game is thus <span class="tex2jax_process">$1 + 2 + 2 = 5$</span>.</p>
<p>The first jump is from position <span class="tex2jax_process">$4$</span> to <span class="tex2jax_process">$2$</span>, making the new positions
    <span class="tex2jax_process">$1, 2, 3$</span>. Here, all
    friends make up a segment of length 3, so each of the friends
    have score 3, making the total score 9.</p>
<p>The second and final jump is from <span class="tex2jax_process">$3$</span> to <span class="tex2jax_process">$0$</span>, resulting in the positions
    <span class="tex2jax_process">$0, 1, 2$</span>. All friends
    still make up a segment of length 3, so the score is unchanged
    from last time, i.e. it is still 9.</p>
<div class="figure" id="a0000000010">
<center>
<img alt="\includegraphics[width=0.8\textwidth ]{sample.png}" src="/problems/friends3/file/statement/en/img-0001.png" style="width:80.00%"/>
<div class="caption">
<b>Figure 1</b>: Illustration of the example
        </div>
</center>
</div>
<h2>Task</h2>
<p>You will get all the jumps in the game, one by one. At some
    points, the friends will ask what the current score is. Your
    task is to implement the functions <tt class="ttfamily">init(N,
    L, P)</tt>, <tt class="ttfamily">jump(A, B)</tt>, and
    <tt class="ttfamily">score()</tt>:</p>
<ul class="itemize">
<li>
<p><tt class="ttfamily">init(N, L, P)</tt> - this function
        will be called exactly once by the judge, at the start of
        the game.</p>
<ul class="itemize">
<li>
<p><tt class="ttfamily">N</tt>: the number of friends
            playing.</p>
</li>
<li>
<p><tt class="ttfamily">L</tt>: the number of locations
            the game is being played on.</p>
</li>
<li>
<p><tt class="ttfamily">P</tt>: an array with
            <span class="tex2jax_process">$N$</span> elements.
            <tt class="ttfamily">P[i]</tt> (<span class="tex2jax_process">$0 \le i &lt; N$</span>) contains the
            original position of the <span class="tex2jax_process">$i$</span>:th friend.</p>
</li>
<li>
<p>The function has no return value.</p>
</li>
</ul>
</li>
<li>
<p><tt class="ttfamily">jump(A, B)</tt> - this function
        will be called once for every jump, in the order they are
        made.</p>
<ul class="itemize">
<li>
<p><tt class="ttfamily">A</tt>: the position a friend
            is jumping from (<span class="tex2jax_process">$0 \le A
            &lt; L$</span>). This position will always contain a
            friend at the time of the jump.</p>
</li>
<li>
<p><tt class="ttfamily">B</tt>: the position a friend
            is jumping to (<span class="tex2jax_process">$0 \le B
            &lt; L$</span>). This position will never contain a
            friend at the time of the jump.</p>
</li>
<li>
<p>The function has no return value.</p>
</li>
</ul>
</li>
<li>
<p><tt class="ttfamily">score()</tt> - this function will
        be called when the friends wish to know their current
        score.</p>
<ul class="itemize">
<li>
<p>The function should return the current score in the
            game.</p>
</li>
</ul>
</li>
</ul>
<p>A code skeleton containing the functions to be implemented,
    together with a sample grader, can be found at <a href="http://progolymp.se/uploads/kattis-attachments/friends.zip">http://progolymp.se/uploads/kattis-attachments/friends.zip</a>.</p>
<h2>Subtasks</h2>
<p>The problem consists of a number of subtasks. Each subtask
    gives some amount of points, and to pass the subtask you must
    pass all the test cases in the subtask.</p>
<p>Let <span class="tex2jax_process">$J$</span> be the number
    of calls to <tt class="ttfamily">jump</tt> and <span class="tex2jax_process">$S$</span> the number of calls to <tt class="ttfamily">score</tt>.</p>
<table cellspacing="0" class="tabular">
<tr>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-left:1px solid black">
<p><b class="bfseries">Subtask</b></p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p><b class="bfseries">Points</b></p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p><b class="bfseries">Limits</b></p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-left:1px solid black">
<p>1</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p>9</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p><span class="tex2jax_process">$1 \le N, L \le 1\,
          000$</span>, <span class="tex2jax_process">$S + J \le 2\,
          000$</span></p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-left:1px solid black">
<p>2</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p>17</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p><span class="tex2jax_process">$1 \le N, L \le 100\,
          000$</span>, <span class="tex2jax_process">$J =
          0$</span>, <span class="tex2jax_process">$S =
          1$</span></p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-left:1px solid black">
<p>3</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p>14</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p><span class="tex2jax_process">$1 \le N \le 100\,
          000$</span>, <span class="tex2jax_process">$1 \le L \le
          10^9$</span>, <span class="tex2jax_process">$J =
          0$</span>, <span class="tex2jax_process">$S =
          1$</span></p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-left:1px solid black">
<p>4</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p>38</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p><span class="tex2jax_process">$1 \le N, L \le 100\,
          000$</span>, <span class="tex2jax_process">$S + J \le
          200\, 000$</span></p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-left:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px">
<p>5</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px">
<p>22</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px">
<p><span class="tex2jax_process">$1 \le N \le 100\,
          000$</span>, <span class="tex2jax_process">$1 \le L \le
          10^9$</span>, <span class="tex2jax_process">$S + J \le
          200\, 000$</span></p>
</td>
</tr>
</table>
<h2>Input format</h2>
<p>The sample judge reads input in the following format:</p>
<ul class="itemize">
<li>
<p>line <span class="tex2jax_process">$1$</span>:
        <tt class="ttfamily">N L Q</tt></p>
</li>
<li>
<p>line <span class="tex2jax_process">$2$</span>:
        <tt class="ttfamily">P[0] P[1] .. P[N - 1]</tt></p>
</li>
<li>
<p>lines <span class="tex2jax_process">$3$</span> to
        <span class="tex2jax_process">$3 + Q - 1$</span>: each line
        represents either a jump or a score question. If the line
        is <tt class="ttfamily">0 A B</tt>, a jump from
        <span class="tex2jax_process">$A$</span> to <span class="tex2jax_process">$B$</span> is to be made, and if the line
        is <tt class="ttfamily">1</tt> a scoring question is to be
        made.</p>
</li>
</ul>
<h2>Output format</h2>
<p>For each scoring question, the judge writes a line with the
    return value of <tt class="ttfamily">score()</tt>.</p>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>3 7 5
1 3 4
1
0 4 2
1
0 3 0
1
</pre>
</td>
<td>
<pre>5
9
9
</pre>
</td>
</tr>
</table>
</div>