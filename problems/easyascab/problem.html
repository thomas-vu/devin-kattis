<div class="problembody">
<p>We all know how to alphabetize a list of distinct words when
    you know the alphabet: One word may be a prefix of another
    longer word, in which case the shorter word always comes before
    the longer word. With any other two words there must be a first
    place in the words where their letters differ. Then the order
    of the words is determined by the lexicographical order of
    these first differing letters.</p>
<p>How about the reverse problem: Can you find the
    lexicographic order of the alphabet from an ordered list of
    words? Suppose an alphabet exists where the following list of
    word strings is given in lexicographical order:</p>
<pre>
cab
cda
ccc
badca
</pre>
<p>It is clear that <tt class="ttfamily">c</tt> comes before
    <tt class="ttfamily">b</tt> in the underlying alphabet because
    <tt class="ttfamily">cab</tt> comes before <tt class="ttfamily">badca</tt>. Similarly, we know <tt class="ttfamily">a</tt> comes before <tt class="ttfamily">d</tt>,
    because <tt class="ttfamily">cab</tt> &lt; <tt class="ttfamily">cda</tt>, <tt class="ttfamily">a</tt> comes before
    <tt class="ttfamily">c</tt> because <tt class="ttfamily">cab</tt> &lt; <tt class="ttfamily">ccc</tt>, and
    <tt class="ttfamily">d</tt> comes before <tt class="ttfamily">c</tt> because <tt class="ttfamily">cda</tt> &lt;
    <tt class="ttfamily">ccc</tt>. The only ordering of the 4
    alphabet characters that is possible is <tt class="ttfamily">adcb</tt>.</p>
<p>However, it may be that a list contains inconsistencies that
    make it impossible to be ordered under any proposed alphabet.
    For example, in the following list it must be that <tt class="ttfamily">a</tt> comes before <tt class="ttfamily">b</tt> in
    the alphabet since <tt class="ttfamily">abc</tt> &lt;
    <tt class="ttfamily">bca</tt>, yet it also must be that
    <tt class="ttfamily">b</tt> comes before <tt class="ttfamily">a</tt> in the alphabet since <tt class="ttfamily">bca</tt> &lt; <tt class="ttfamily">aca</tt>.</p>
<pre>
abc
bca
cab
aca
</pre>
<p>Finally, some lists may not provide enough clues to derive a
    unique alphabet order, such as the following:</p>
<pre>
dea
cfb
</pre>
<p>In this list, <tt class="ttfamily">d</tt> comes before
    <tt class="ttfamily">c</tt> but we donâ€™t know about the
    relative positions of any of the other letters, so we are
    unable to uniquely discern the order of the alphabet
    characters.</p>
<h2>Input</h2>
<p>The first line of input will contain <span class="tex2jax_process">$L$</span> and <span class="tex2jax_process">$N$</span>, separated by a space, where
    <span class="tex2jax_process">$L$</span> is a lowercase
    character <span class="mbox" style="width:"><span class="tex2jax_process">$\texttt{b} \le L \le
    \texttt{z}$</span></span> representing the highest character in
    the English alphabet that appears in the derived alphabet, and
    <span class="tex2jax_process">$N$</span> is an integer
    <span class="tex2jax_process">$1 \leq N \leq 1\, 000$</span>
    that is equal to the number of strings in the list. Each of the
    next <span class="tex2jax_process">$N$</span> lines will
    contain a single nonempty string of length at most <span class="tex2jax_process">$1\, 000$</span>, consisting only of
    characters in the derived alphabet. No two strings will be the
    same.</p>
<h2>Output</h2>
<p>If the input is consistent with a unique ordering of the
    alphabet, output a string that designates that ordered
    alphabet. If the data is inconsistent with any ordering, output
    <tt class="tt">IMPOSSIBLE</tt>. If the data is consistent with
    multiple orderings, output <tt class="tt">AMBIGUOUS</tt>.</p>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>d 4
cab
cda
ccc
badca
</pre>
</td>
<td>
<pre>adcb
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 2</th>
<th>Sample Output 2</th>
</tr>
<tr>
<td>
<pre>c 4
abc
bca
cab
aca
</pre>
</td>
<td>
<pre>IMPOSSIBLE
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 3</th>
<th>Sample Output 3</th>
</tr>
<tr>
<td>
<pre>f 2
dea
cfb
</pre>
</td>
<td>
<pre>AMBIGUOUS
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 4</th>
<th>Sample Output 4</th>
</tr>
<tr>
<td>
<pre>e 5
ebbce
dbe
adcd
bc
cd
</pre>
</td>
<td>
<pre>edabc
</pre>
</td>
</tr>
</table>
</div>