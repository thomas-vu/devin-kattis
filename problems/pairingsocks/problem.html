<div class="problembody">
<div class="illustration" style="width:25.00%">
<img alt="/problems/pairingsocks/file/statement/en/img-0001.jpg" class="illustration" src="/problems/pairingsocks/file/statement/en/img-0001.jpg"/>
<div class="description">
<a href="https://commons.wikimedia.org/wiki/Category:Socks#/media/File:H%C3%B8nsestrik_i_den_gamle_by_4.jpg">
        Picture</a> by Villy Fink Isaksen, cc by-sa
      </div>
</div>Simone’s mother often complains about how Simone never
    helps with chores at home. In return, Simone often points out
    that many of the chores her mother assigns her are NP-complete
    to perform optimally (like cleaning the house, seating her
    little brothers around the dinner table in a conflict-free way,
    splitting the brothers’ Halloween loot in a fair manner and so
    on).
    <p>Being a computer scientist, her mother finds this a fair
    objection. Looking over her list of potential chores, she
    picked one she thinks should be easy to solve – pairing a
    number of different kinds of socks.</p>
<p>In the beginning, there are <span class="tex2jax_process">$2n$</span> socks stacked in a pile. To pair
    the socks, Simone can repeatedly make one of three moves:</p>
<ol class="enumerate">
<li>
<p>Move the sock from the top of the original pile to the
        top of an auxiliary pile (which is originally empty).</p>
</li>
<li>
<p>Move the sock from the top of the auxiliary pile to the
        top of the original pile.</p>
</li>
<li>
<p>Pair the top socks from each pile together, if they are
        of the same type.</p>
</li>
</ol>
<p>Simone only has one auxiliary pile, for a total of two
    piles. There may be more than two socks of each type. In this
    case, Simone can pair them up however she wants.</p>
<p>Your task is to help Simone to determine the least number of
    moves she needs to pair the socks, if it is possible at
    all.</p>
<h2>Input</h2>
<p>The first line of input contains the integer <span class="tex2jax_process">$n$</span> (<span class="tex2jax_process">$1
    \le n \le 10^5$</span>) as described above. The next line
    contains <span class="tex2jax_process">$2n$</span> integers
    <span class="tex2jax_process">$a_1, \ldots , a_{2n}$</span>
    (<span class="tex2jax_process">$1 \le a_ i \le 10^9$</span> for
    each <span class="tex2jax_process">$i$</span>), where
    <span class="tex2jax_process">$a_ i$</span> denotes the type of
    sock number <span class="tex2jax_process">$i$</span>.
    Initially, sock <span class="tex2jax_process">$1$</span> is at
    the top of the pile and sock <span class="tex2jax_process">$2n$</span> is at the bottom.</p>
<h2>Output</h2>
<p>If Simone can pair all the socks, output the least number of
    moves she needs to do this. If it is impossible to do so,
    output “<tt class="ttfamily">impossible</tt>” (without the
    quotes).</p>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>2
1 2 2 1
</pre>
</td>
<td>
<pre>4
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 2</th>
<th>Sample Output 2</th>
</tr>
<tr>
<td>
<pre>1
3 7
</pre>
</td>
<td>
<pre>impossible
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 3</th>
<th>Sample Output 3</th>
</tr>
<tr>
<td>
<pre>3
5 5 5 5 5 5
</pre>
</td>
<td>
<pre>6
</pre>
</td>
</tr>
</table>
</div>