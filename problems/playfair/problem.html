<div class="problembody">
<p>The Playfair cipher is a manual symmetric encryption
    technique and was the first digraph substitution cipher. The
    scheme was invented in 1854 by Charles Wheatstone, but bears
    the name of Lord Playfair who promoted the use of the
    cipher.</p>
<p>The Playfair cipher uses a <span class="tex2jax_process">$5$</span> by <span class="tex2jax_process">$5$</span> table containing each letter in
    the English alphabet exactly once (except ‘Q’ which is
    missing). The table constitutes the encryption key. To more
    easily remember the table, it is typically generated from a key
    phrase. First fill in the spaces in an empty table with the
    letters of the key phrase (dropping spaces and duplicate
    letters), then fill the remaining spaces with the rest of the
    letters of the alphabet in order. The key phrase is written in
    the top rows of the table, from left to right. For instance, if
    the key phrase is “playfair example”, the encryption key
    becomes</p>
<center>
<table cellspacing="0" class="tabular">
<tr>
<td style="border-top-style:solid; border-left:1px solid black; border-right:1px solid black; border-top-color:black; border-top-width:1px; text-align:center">
<p>P</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>L</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>A</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>Y</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>F</p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-left:1px solid black; border-right:1px solid black; border-top-color:black; border-top-width:1px; text-align:center">
<p>I</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>R</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>E</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>X</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>M</p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-left:1px solid black; border-right:1px solid black; border-top-color:black; border-top-width:1px; text-align:center">
<p>B</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>C</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>D</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>G</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>H</p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-left:1px solid black; border-right:1px solid black; border-top-color:black; border-top-width:1px; text-align:center">
<p>J</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>K</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>N</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>O</p>
</td>
<td style="border-top-style:solid; text-align:center; border-top-color:black; border-top-width:1px; border-right:1px solid black">
<p>S</p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-bottom-style:solid; border-bottom-width:1px; border-left:1px solid black; border-right:1px solid black; border-top-color:black; border-top-width:1px; border-bottom-color:black; text-align:center">
<p>T</p>
</td>
<td style="border-top-style:solid; border-bottom-style:solid; border-bottom-width:1px; border-bottom-color:black; border-right:1px solid black; border-top-color:black; border-top-width:1px; text-align:center">
<p>U</p>
</td>
<td style="border-top-style:solid; border-bottom-style:solid; border-bottom-width:1px; border-bottom-color:black; border-right:1px solid black; border-top-color:black; border-top-width:1px; text-align:center">
<p>V</p>
</td>
<td style="border-top-style:solid; border-bottom-style:solid; border-bottom-width:1px; border-bottom-color:black; border-right:1px solid black; border-top-color:black; border-top-width:1px; text-align:center">
<p>W</p>
</td>
<td style="border-top-style:solid; border-bottom-style:solid; border-bottom-width:1px; border-bottom-color:black; border-right:1px solid black; border-top-color:black; border-top-width:1px; text-align:center">
<p>Z</p>
</td>
</tr>
</table>
</center>
<p>To encrypt a message, one would remove all spaces and then
    break the message into digraphs (groups of <span class="tex2jax_process">$2$</span> letters) such that, for example,
    “Hello World” becomes “HE LL OW OR LD”. Then map them out on
    the key table, and apply the rule below that matches the letter
    combination:</p>
<ul class="itemize">
<li>
<p>If both letters are the same (or only one letter is
        left), add an ‘X’ after the first letter. Encrypt the new
        pair and continue (note that this changes all the remaining
        digraphs).</p>
</li>
<li>
<p>If the letters appear on the same row of your table,
        replace them with the letters to their immediate right
        respectively (wrapping around to the left side of the row
        if a letter in the original pair was on the right side of
        the row). With the table above, the digraph ‘CH’ would be
        encrypted ‘DB’.</p>
</li>
<li>
<p>If the letters appear on the same column of your table,
        replace them with the letters immediately below
        respectively (wrapping around to the top side of the column
        if a letter in the original pair was on the bottom side of
        the column). With the table above, the digraph ‘VA’ would
        be encrypted ‘AE’.</p>
</li>
<li>
<p>If the letters are not on the same row or column,
        replace them with the letters on the same row respectively
        but at the other pair of corners of the rectangle defined
        by the original pair. The order is important – the first
        letter of the encrypted pair is the one that lies on the
        same row as the first letter of the plaintext pair. With
        the table above, the digraph ‘KM’ would be encrypted
        ‘SR’.</p>
</li>
</ul>
<p>Write a program that reads a key phrase and a plaintext to
    encrypt, and outputs the encrypted text.</p>
<p><i class="itshape">The text to encrypt will not contain two
    ’x’s following each other, or an ’x’ as the last character, as
    this might cause the first rule above to repeat itself
    indefinitely.</i></p>
<h2>Input</h2>
<p>The input contains two lines. The first line contains the
    key phrase. The second line contains the text to encrypt. Each
    line contains between <span class="tex2jax_process">$1$</span>
    and <span class="tex2jax_process">$1000$</span> characters,
    inclusive. Each character is a lower case English letter,
    ‘<tt class="ttfamily">a</tt>’-‘<tt class="ttfamily">z</tt>’
    (except ‘<tt class="ttfamily">q</tt>’), or a space character.
    Neither line starts or ends with a space.</p>
<h2>Output</h2>
<p>The output should be a single line containing the encrypted
    text, in upper case. There should be no spaces in the
    output.</p>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>
playfair example
hide the gold in the tree stump
</pre>
</td>
<td>
<pre>
BMNDZBXDKYBEJVDMUIXMMNUVIF
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 2</th>
<th>Sample Output 2</th>
</tr>
<tr>
<td>
<pre>
the magic key
i love programming competition
</pre>
</td>
<td>
<pre>
YDVHCWSPKNTAHKUBIPERMHGHDVRU
</pre>
</td>
</tr>
</table>
</div>