<div class="problembody">
<div class="illustration" style="width:30.00%">
<img alt="/problems/discretelogging/file/statement/en/img-0001.jpg" class="illustration" src="/problems/discretelogging/file/statement/en/img-0001.jpg"/>
<div class="description"></div>
</div>
<p>Given a prime <span class="tex2jax_process">$P$</span>,
    <span class="tex2jax_process">$2 \le P &lt; 2^{31}$</span>, an
    integer <span class="tex2jax_process">$B$</span>, <span class="tex2jax_process">$2 \le B &lt; P$</span>, and an integer
    <span class="tex2jax_process">$N$</span>, <span class="tex2jax_process">$1 \le N &lt; P$</span>, compute the discrete
    logarithm of <span class="tex2jax_process">$N$</span>, base
    <span class="tex2jax_process">$B$</span>, modulo <span class="tex2jax_process">$P$</span>. That is, find an integer
    <span class="tex2jax_process">$L \ge 0$</span> such
    that</p><span class="tex2jax_process">\[ B^ L \equiv N \bmod
    {P}. \]</span>
<p>The solution to this problem requires a well known result in
    number theory that is probably expected of you for Putnam but
    not ACM competitions. It is Fermat’s theorem that
    states</p><span class="tex2jax_process">\[ B^{P-1} \equiv 1
    \bmod {P} \]</span>
<p>for any prime <span class="tex2jax_process">$P$</span> and
    some other (fairly rare) numbers known as base-<span class="tex2jax_process">$B$</span> pseudoprimes. A rarer subset of
    the base-<span class="tex2jax_process">$B$</span> pseudoprimes,
    known as Carmichael numbers, are pseudoprimes for every base
    between <span class="tex2jax_process">$2$</span> and
    <span class="tex2jax_process">$P-1$</span>. A corollary to
    Fermat’s theorem is that for any <span class="tex2jax_process">$m$</span></p><span class="tex2jax_process">\[ B^{-m} \equiv B^{P-1-m} \bmod {P}
    \]</span>
<h2>Input</h2>
<p>There are several lines of input (at most <span class="tex2jax_process">$15$</span>), each containing <span class="tex2jax_process">$P$</span>, <span class="tex2jax_process">$B$</span>, and <span class="tex2jax_process">$N$</span> separated by a space.</p>
<h2>Output</h2>
<p>For each input line, print the logarithm on a separate line.
    If there are several solutions, print the smallest; if there is
    none, print “<tt class="ttfamily">no solution</tt>”.</p>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>5 2 1
5 2 2
5 2 3
5 2 4
5 3 1
5 3 2
5 3 3
5 3 4
5 4 1
5 4 2
5 4 3
5 4 4
12345701 2 1111111
1111111121 65537 1111111111
</pre>
</td>
<td>
<pre>0
1
3
2
0
3
1
2
0
no solution
no solution
1
9584351
462803587
</pre>
</td>
</tr>
</table>
</div>