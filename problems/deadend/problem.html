<div class="problembody">
<div class="illustration" style="width:24.00%">
<img alt="/problems/deadend/file/statement/en/img-0001.png" class="illustration" src="/problems/deadend/file/statement/en/img-0001.png"/>
<div class="description">
        A dead-end sign.<br/>
        Source: <a href="https://commons.wikimedia.org/wiki/File:Vienna_Convention_road_sign_G13-EA.svg">
        Wikimedia Commons</a>
</div>
</div>The council of your home town has decided to improve road
    sign placement, especially for dead ends. They have given you a
    road map, and you must determine where to put up signs to mark
    the dead ends. They want you to use as few signs as possible.
    <p>The road map is a collection of locations connected by
    two-way streets. The following rule describes how to obtain a
    complete placement of dead-end signs. Consider a street
    <span class="tex2jax_process">$S$</span> connecting a location
    <span class="tex2jax_process">$x$</span> with another location.
    The <span class="tex2jax_process">$x$</span>-entrance of
    <span class="tex2jax_process">$S$</span> gets a dead-end sign
    if, after entering <span class="tex2jax_process">$S$</span>
    from <span class="tex2jax_process">$x$</span>, it is not
    possible to come back to <span class="tex2jax_process">$x$</span> without making a U-turn. A U-turn
    is a <span class="tex2jax_process">$180$</span>-degree turn
    immediately reversing the direction.</p>
<p>To save costs, you have decided not to install redundant
    dead-end signs, as specified by the following rule. Consider a
    street <span class="tex2jax_process">$S$</span> with a dead-end
    sign at its <span class="tex2jax_process">$x$</span>-entrance
    and another street <span class="tex2jax_process">$T$</span>
    with a dead-end sign at its <span class="tex2jax_process">$y$</span>-entrance. If, after entering
    <span class="tex2jax_process">$S$</span> from <span class="tex2jax_process">$x$</span>, it is possible to go to
    <span class="tex2jax_process">$y$</span> and enter <span class="tex2jax_process">$T$</span> without making a U-turn, the
    dead-end sign at the <span class="tex2jax_process">$y$</span>-entrance of <span class="tex2jax_process">$T$</span> is redundant. See Figure 1
    for examples.</p>
<div class="figure" id="fig:deadend">
<center>
<table class="subfigure" id="a0000000005" style="display:inline-table">
<tr>
<td><img alt="\includegraphics[width=6cm]{sample1.pdf}" src="/problems/deadend/file/statement/en/img-0002.png" style="width:6cm"/></td>
</tr>
<tr>
<td style="text-align:center">(a) <span>Sample Input
            1</span></td>
</tr>
</table>   
        <table class="subfigure" id="a0000000006" style="display:inline-table">
<tr>
<td><img alt="\includegraphics[width=6cm]{sample2.pdf}" src="/problems/deadend/file/statement/en/img-0003.png" style="width:6cm"/></td>
</tr>
<tr>
<td style="text-align:center">(b) <span>Sample Input
            2</span></td>
</tr>
</table>
<div class="caption">
<b>Figure 1</b>: Illustration of sample inputs,
          indicating where non-redundant dead-end signs are placed.
        </div>
</center>
</div>
<h2>Input</h2>
<p>The first line of input contains two integers <span class="tex2jax_process">$n$</span> and <span class="tex2jax_process">$m$</span>, where <span class="tex2jax_process">$n$</span> (<span class="tex2jax_process">$1
    \leq n \leq 5 \cdot 10^5$</span>) is the number of locations
    and <span class="tex2jax_process">$m$</span> (<span class="tex2jax_process">$0 \leq m \leq 5 \cdot 10^5$</span>) is the
    number of streets. Each of the following <span class="tex2jax_process">$m$</span> lines contains two integers
    <span class="tex2jax_process">$v$</span> and <span class="tex2jax_process">$w$</span> (<span class="tex2jax_process">$1
    \leq v &lt; w \leq n$</span>) indicating that there is a
    two-way street connecting locations <span class="tex2jax_process">$v$</span> and <span class="tex2jax_process">$w$</span>. All location pairs in the input
    are distinct.</p>
<h2>Output</h2>
<p>On the first line, output <span class="tex2jax_process">$k$</span>, the number of dead-end signs
    installed. On each of the next <span class="tex2jax_process">$k$</span> lines, output two integers
    <span class="tex2jax_process">$v$</span> and <span class="tex2jax_process">$w$</span> marking that a dead-end sign
    should be installed at the <span class="tex2jax_process">$v$</span>-entrance of a street connecting
    locations <span class="tex2jax_process">$v$</span> and
    <span class="tex2jax_process">$w$</span>. The lines describing
    dead-end signs must be sorted in ascending order of
    <span class="tex2jax_process">$v$</span>-locations, breaking
    ties in ascending order of <span class="tex2jax_process">$w$</span>-locations.</p>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>6 5
1 2
1 3
2 3
4 5
5 6
</pre>
</td>
<td>
<pre>2
4 5
6 5
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 2</th>
<th>Sample Output 2</th>
</tr>
<tr>
<td>
<pre>8 8
1 2
1 3
2 3
3 4
1 5
1 6
6 7
6 8
</pre>
</td>
<td>
<pre>3
1 5
1 6
3 4
</pre>
</td>
</tr>
</table>
</div>