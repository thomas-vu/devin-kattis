<div class="problembody">
<p>You will be given a simple, connected graph <span class="tex2jax_process">$G$</span> with <span class="tex2jax_process">$N$</span> vertices. Each vertex in
    <span class="tex2jax_process">$G$</span> has been numbered
    between <span class="tex2jax_process">$0$</span> and
    <span class="tex2jax_process">$N - 1$</span>.</p>
<p>Determine if a list <span class="tex2jax_process">$L$</span>
    is a valid depth first-search order. A valid depth first-search
    order is one that can be generated by the following procedure,
    called with some argument between <span class="tex2jax_process">$0$</span> and <span class="tex2jax_process">$N - 1$</span>:</p>
<pre>
DFS(start):
  print start
  seen[start] = true
  for each v : neighbours(start):
    if not seen[v]:
      DFS(v)
</pre>
<p>Note that the neighbours to the vertex <span class="tex2jax_process">$v$</span> can be iterated through <em>in any
    order</em> by Mårten’s algorithm.</p>
<h2>Input</h2>
<p>The first line of input contains two integers <span class="tex2jax_process">$1 \le N \le 100\, 000$</span> and
    <span class="tex2jax_process">$0 \le E \le 300\, 000$</span>,
    the number of vertices and edges of <span class="tex2jax_process">$G$</span>.</p>
<p>The next <span class="tex2jax_process">$E$</span> lines
    contains two integers <span class="tex2jax_process">$0 \le a, b
    \le N - 1$</span>, describing an edge in <span class="tex2jax_process">$G$</span> between the vertices <span class="tex2jax_process">$a$</span> and <span class="tex2jax_process">$b$</span>.</p>
<p>The final line will contain a space-separated list
    <span class="tex2jax_process">$L$</span> of (possible none)
    integers.</p>
<h2>Output</h2>
<p>You should output <tt class="ttfamily">YES</tt> if
    <span class="tex2jax_process">$L$</span> is a valid depth
    first-search order. Otherwise, you should output <tt class="ttfamily">NO</tt>.</p>
<h2>Grading</h2>
<p>Your solution will be graded on a number of subtasks. To get
    the points for a subtask, you must be accepted on all test
    cases in the subtask.</p>
<table cellspacing="0" class="tabular">
<tr>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-left:1px solid black">
<p>Subtask</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p>Points</p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p>Limits</p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-left:1px solid black">
<p><span class="tex2jax_process">$1$</span></p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p><span class="tex2jax_process">$19$</span></p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p><span class="tex2jax_process">$1 \le N \le 8$</span>,
          <span class="tex2jax_process">$1 \le E \le 28$</span></p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-left:1px solid black">
<p><span class="tex2jax_process">$2$</span></p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p><span class="tex2jax_process">$43$</span></p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black">
<p><span class="tex2jax_process">$1 \le N \le 1\,
          000$</span>, <span class="tex2jax_process">$1 \le E \le
          5\, 000$</span></p>
</td>
</tr>
<tr>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-left:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px">
<p><span class="tex2jax_process">$3$</span></p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px">
<p><span class="tex2jax_process">$38$</span></p>
</td>
<td style="border-top-style:solid; border-top-color:black; border-top-width:1px; text-align:left; border-right:1px solid black; border-bottom-style:solid; border-bottom-color:black; border-bottom-width:1px">
<p>No additional constraints.</p>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>4 3
0 1
1 2
2 3
0 1 2 3
</pre>
</td>
<td>
<pre>YES
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 2</th>
<th>Sample Output 2</th>
</tr>
<tr>
<td>
<pre>4 3
0 1
1 2
2 3
2 1 0 3
</pre>
</td>
<td>
<pre>YES
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 3</th>
<th>Sample Output 3</th>
</tr>
<tr>
<td>
<pre>4 3
0 1
1 2
2 3
2 1 3 0
</pre>
</td>
<td>
<pre>NO
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 4</th>
<th>Sample Output 4</th>
</tr>
<tr>
<td>
<pre>4 3
0 1
1 2
2 3
0 1 2
</pre>
</td>
<td>
<pre>NO
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 5</th>
<th>Sample Output 5</th>
</tr>
<tr>
<td>
<pre>4 3
0 1
1 2
2 3
1 0 4 3 2
</pre>
</td>
<td>
<pre>NO
</pre>
</td>
</tr>
</table>
</div>