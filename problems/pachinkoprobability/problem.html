<div class="problembody">
<div class="illustration" style="width:30.00%">
<img alt="/problems/pachinkoprobability/file/statement/en/img-0001.jpg" class="illustration" src="/problems/pachinkoprobability/file/statement/en/img-0001.jpg"/>
<div class="description">
        Image from <a href="https://en.wikipedia.org/wiki/File:Mechanical_sankyo_pachinko_machine.jpg">
        Wikipedia</a>.
      </div>
</div>
<p>A pachinko machine is a Japanese invention that is sort of
    like a pinball machine. Each pachinko machine uses marbles
    which fall from the top and bounce off of fixed pins until they
    reach the bottom. When they reach the bottom, if they fall into
    a particular area (a ‘gate’), then that round wins; otherwise,
    the round loses.</p>
<div class="figure" id="pachinkofig">
<center>
<img alt="\includegraphics[width=0.2\textwidth ]{example_1}" src="/problems/pachinkoprobability/file/statement/en/img-0002.png" style="width:20.00%"/> <img alt="\includegraphics[width=0.2\textwidth ]{example_2}" src="/problems/pachinkoprobability/file/statement/en/img-0003.png" style="width:20.00%"/>
<div class="caption">
<b>Figure 1</b>: Sample data illustrations. The
          rectangular nodes are gates.
        </div>
</center>
</div>
<p>In Figure 1, which illustrates the sample inputs, the nodes
    represent possible marble locations (nodes are not the pins;
    they are between the pins), the boxes represent gates, and the
    edges represent possible transitions between locations. Write a
    program to find out how likely it is that you can win at
    pachinko.</p>
<h2>Input</h2>
<p>Input contains a description of a single machine, which is
    given as a directed acyclic graph indicating the places a
    marble can travel as it proceeds from the top to the bottom. A
    marble may start at any graph node that has no incoming edges,
    and always ends at a node having no outgoing edges. Each
    machine starts with a line containing an integer <span class="tex2jax_process">$1 \leq n \leq 1\, 000$</span>, indicating
    the number of nodes in the graph (nodes are numbered
    <span class="tex2jax_process">$0$</span> to <span class="tex2jax_process">$n-1$</span>). The next line contains an
    integer <span class="tex2jax_process">$0 \leq m \leq \min
    (n(n-1)/2,10\, 000)$</span> indicating the number of edges in
    the graph. The following <span class="tex2jax_process">$m$</span> lines each contain two integers
    <span class="tex2jax_process">$x$</span> and <span class="tex2jax_process">$y$</span> (both in the range <span class="tex2jax_process">$[0,n-1]$</span>), indicating that node
    <span class="tex2jax_process">$x$</span> leads to node
    <span class="tex2jax_process">$y$</span>. Finally, the last
    line of a machine’s description has an integer <span class="tex2jax_process">$0 \leq k \leq n$</span> indicating how many
    gates there are. This is followed by <span class="tex2jax_process">$k$</span> numbers in the range <span class="tex2jax_process">$[0,n-1]$</span> indicating the gates, one
    per line. Every gate is a node with no outgoing edges.</p>
<h2>Output</h2>
<p>Print out the number of possible winning paths (those ending
    in a gate) and the total number of possible paths. Do not
    reduce these numbers. A ‘possible path’ is any sequence of
    graph nodes that lead from a starting node to an ending
    node.</p>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>
3
2
0 1
0 2
1
1
</pre>
</td>
<td>
<pre>
winning paths 1
total paths 2
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 2</th>
<th>Sample Output 2</th>
</tr>
<tr>
<td>
<pre>
6
8
0 2
0 3
1 2
1 3
2 4
2 5
3 4
3 5
1
4
</pre>
</td>
<td>
<pre>
winning paths 4
total paths 8
</pre>
</td>
</tr>
</table>
</div>