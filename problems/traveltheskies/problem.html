<div class="problembody">
<div class="illustration" style="width:40.00%">
<img alt="/problems/traveltheskies/file/statement/en/img-0001.jpg" class="illustration" src="/problems/traveltheskies/file/statement/en/img-0001.jpg"/>
<div class="description">
        Wikimedia, cc-by-sa
      </div>
</div>
<p>One day your boss explains his new planning scheme for your
    company, Fly Away Air. Rather than having customers book
    tickets between destinations, they’ll say when they want to
    leave and from where, and your company will take care of the
    rest. That means you get to generate their flight schedules and
    destinations for them! He has an eye on the books though and
    wants to make sure all your flights are fully booked. He tasks
    you with the job of determining if a set of flight plans in a
    given flight window is financially optimal in that regard.</p>
<p>You assure him that he put his trust—and his pocket book—in
    the hands of the right employee. Your job is to plan flight
    schedules for customers so that you fill each of the flights
    scheduled in the given flight window. To ensure you don’t lose
    customers due to air sickness, you decide that each customer
    can only take one flight a day. Further, since you’re sure that
    all of your customers are gracious folks, you decide to help
    your boss out and let them fly on any day on or after their
    suggested departure date. Finally, to simplify things, you do
    not worry about ensuring each customer return to their original
    departure airport, though this is allowed to be scheduled. If
    needed, they can book their own return flights!</p>
<h2>Input</h2>
<p>On the first line, you’re given three integers: <span class="tex2jax_process">$k$</span>, (<span class="tex2jax_process">$2
    \leq k \leq 12$</span>), the number of airports; <span class="tex2jax_process">$n$</span>, (<span class="tex2jax_process">$1
    \leq n \leq 8$</span>), the number of days of the flight
    departure window; and <span class="tex2jax_process">$m$</span>,
    (<span class="tex2jax_process">$1 \leq m \leq k\cdot (k-1)
    \cdot n$</span>); the number of flights in the window. Then,
    <span class="tex2jax_process">$m$</span> lines follow with four
    integers each: <span class="tex2jax_process">$u$</span>,
    (<span class="tex2jax_process">$1 \leq u \leq k$</span>), the
    flight’s starting location; <span class="tex2jax_process">$v$</span>, (<span class="tex2jax_process">$1
    \leq v \leq k$</span>, <span class="tex2jax_process">$u \neq
    v$</span>), the flight’s ending destination; <span class="tex2jax_process">$d$</span>, (<span class="tex2jax_process">$1
    \leq d \leq n$</span>), the day on which the flight flies in
    the window; and <span class="tex2jax_process">$z$</span>,
    (<span class="tex2jax_process">$1 \leq z \leq 30\,
    000$</span>), the capacity of the flight. It is guaranteed
    there will be at most one flight in each direction between any
    two airports on a given day. Following are <span class="tex2jax_process">$kn$</span> lines with three integers each:
    <span class="tex2jax_process">$a$</span>, (<span class="tex2jax_process">$1 \leq a \leq k$</span>), the airport;
    <span class="tex2jax_process">$b$</span>, (<span class="tex2jax_process">$1 \leq b \leq n$</span>), the day; and
    <span class="tex2jax_process">$c$</span>, (<span class="tex2jax_process">$1 \leq c \leq 30\, 000$</span>), the number
    of customers wishing to begin their travels by leaving their
    homes to their local airport <span class="tex2jax_process">$a$</span> on day <span class="tex2jax_process">$b$</span> (notably, this does not include
    those who may be arriving from other flights, which is for you
    to decide). Each airport-day pair will appear exactly once.</p>
<h2>Output</h2>
<p>Output only the word <tt class="ttfamily">optimal</tt> if
    all <span class="tex2jax_process">$m$</span> flights can be
    filled to capacity, else output only the word <tt class="ttfamily">suboptimal</tt> if it is not possible to fill all
    <span class="tex2jax_process">$m$</span> flights. It is not
    necessary that each customer arriving at an airport ever be
    booked on a flight.</p>
<h2>Example</h2>
<p>Consider two airports: Chicago and Minneapolis, across two
    days. There are two flights: one from Chicago to Minneapolis on
    day <span class="tex2jax_process">$1$</span>, with capacity
    <span class="tex2jax_process">$30$</span>, and one from
    Minneapolis to Chicago on day <span class="tex2jax_process">$2$</span>, with capacity <span class="tex2jax_process">$50$</span>. On day <span class="tex2jax_process">$1$</span>, <span class="tex2jax_process">$10$</span> people arrive at the airport in
    Minneapolis from their homes and <span class="tex2jax_process">$30$</span> people arrive at the airport from
    their homes in Chicago. On day <span class="tex2jax_process">$2$</span>, <span class="tex2jax_process">$10$</span> people arrive at both the
    Minneapolis and Chicago airports from their homes. We can fill
    all flights as follows. The first flight, on day <span class="tex2jax_process">$1$</span>, can take the <span class="tex2jax_process">$30$</span> people that arrived in Chicago
    that day to Minneapolis. The second flight, on day <span class="tex2jax_process">$2$</span>, can take the <span class="tex2jax_process">$30$</span> people that arrived in
    Minneapolis from Chicago in the previous day’s flight, plus it
    can take the <span class="tex2jax_process">$10$</span> people
    that arrived at the Minneapolis airport on day <span class="tex2jax_process">$1$</span> and the additional <span class="tex2jax_process">$10$</span> people that arrived at the
    Minneapolis airport on day <span class="tex2jax_process">$2$</span>. Thus this flight plan is
    <tt class="ttfamily">optimal</tt>.</p>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>2 2 2
1 2 1 30
2 1 2 50
2 1 10
1 1 30
1 2 10
2 2 10
</pre>
</td>
<td>
<pre>optimal
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 2</th>
<th>Sample Output 2</th>
</tr>
<tr>
<td>
<pre>2 1 1
1 2 1 2
1 1 1
2 1 1
</pre>
</td>
<td>
<pre>suboptimal
</pre>
</td>
</tr>
</table>
</div>