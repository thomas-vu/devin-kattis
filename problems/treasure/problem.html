<div class="problembody">
<div class="illustration" style="width:40.00%">
<img alt="/problems/treasure/file/statement/en/img-0001.jpg" class="illustration" src="/problems/treasure/file/statement/en/img-0001.jpg"/>
<div class="description">
        Image by <a href="https://www.flickr.com/photos/130729854@N07/16491939584">Steven
        Johnson</a>
</div>
</div>
<p>You are a treasure hunter searching for gold in the wild.
    Luckily you got a map of the area from a black marketeer. The
    map clearly shows where a box of gold is along with the
    surrounding terrain. Of course, you want to head to the
    treasure as fast as possible. However, the trip might not be
    easy.</p>
<p>The area is described by a grid of <span class="tex2jax_process">$N$</span> rows and <span class="tex2jax_process">$M$</span> columns. You are currently located
    at the cell labeled ‘<tt class="ttfamily">S</tt>’. The treasure
    is located at the cell labeled ‘<tt class="ttfamily">G</tt>’.
    Despite your eagerness for the treasure, you cannot keep moving
    tirelessly. The surrounding area has different landforms: plain
    (‘<tt class="ttfamily">.</tt>’), forest (‘<tt class="ttfamily">F</tt>’), mountain (‘<tt class="ttfamily">M</tt>’)
    or river (‘<tt class="ttfamily">#</tt>’). Rivers are impassable
    since no boats are currently available. You can navigate in
    four directions (up, down, left, right) between neighboring
    cells.</p>
<p>At the beginning of your trip you have <span class="tex2jax_process">$K$</span> stamina points. Moving onto a
    plain, forest, and mountain costs you <span class="tex2jax_process">$1$</span>, <span class="tex2jax_process">$2$</span>, and <span class="tex2jax_process">$3$</span> points of stamina respectively.
    Once you run out of stamina and can no longer move to nearby
    cells, you must camp and rest. Your stamina is replenished to
    the full <span class="tex2jax_process">$K$</span> points on the
    second day so that you can start moving again.</p>
<p>Plan wisely with the map and determine the minimum number of
    days you need to reach the treasure.</p>
<h2>Input</h2>
<p>The first line has three integers <span class="tex2jax_process">$N$</span>, <span class="tex2jax_process">$M$</span> (<span class="tex2jax_process">$1\leq N, M \leq 50$</span>), and
    <span class="tex2jax_process">$K$</span> (<span class="tex2jax_process">$1 \leq K \leq 100$</span>). Each of the next
    <span class="tex2jax_process">$N$</span> lines has <span class="tex2jax_process">$M$</span> characters describing the grid
    shown by the treasure map. The grid contains only characters
    ‘<tt class="ttfamily">.</tt>’, ‘<tt class="ttfamily">F</tt>’,
    ‘<tt class="ttfamily">M</tt>’, ‘<tt class="ttfamily">#</tt>’,
    ‘<tt class="ttfamily">S</tt>’, and ‘<tt class="ttfamily">G</tt>’. It is guaranteed that ‘<tt class="ttfamily">S</tt>’ and ‘<tt class="ttfamily">G</tt>’ appear
    exactly once in the grid. You may assume your starting point
    (‘<tt class="ttfamily">S</tt>’) and the treasure (‘<tt class="ttfamily">G</tt>’) are both on a plain.</p>
<h2>Output</h2>
<p>Output the minimum number of days you need to reach the
    treasure. If it is impossible to get to the treasure, output
    “-1”.</p>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 1</th>
<th>Sample Output 1</th>
</tr>
<tr>
<td>
<pre>
2 5 4
S#.F.
.MFMG
</pre>
</td>
<td>
<pre>
3
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 2</th>
<th>Sample Output 2</th>
</tr>
<tr>
<td>
<pre>
1 2 1
GS
</pre>
</td>
<td>
<pre>
1
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 3</th>
<th>Sample Output 3</th>
</tr>
<tr>
<td>
<pre>
2 2 10
S#
#G
</pre>
</td>
<td>
<pre>
-1
</pre>
</td>
</tr>
</table>
<table class="sample" summary="sample data">
<tr>
<th>Sample Input 4</th>
<th>Sample Output 4</th>
</tr>
<tr>
<td>
<pre>
1 7 4
SMMMMMG
</pre>
</td>
<td>
<pre>
5
</pre>
</td>
</tr>
</table>
</div>